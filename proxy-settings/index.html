<!DOCTYPE html><html lang="zh-CN"><head><script>!function(){var e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("use-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script><meta charset="utf-8"><title>各常用包管理器配置科学上网代理</title><meta name="keywords" content="翻墙,科学上网,代理,http代理,socket5代理,GitHub设置代理,git clone走代理,ssh走代理,GFW,包管理器,composer,go get,npm,科学上网解决方案"><meta name="description" content="在日常使用各包管理器时，经常会出现被 GFW 劫持的情况，为此耽误了太多时间，故写此文已记录各常用包管理器走代理的方法，如有更好的方案请留言！"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/style/main.css"><link rel="stylesheet" href="/style/gitalk.min.css"><link rel="alternate" href="/atom.xml" title="codeover" type="application/atom+xml"><link rel="alternate" href="/rss2.xml" title="codeover" type="application/rss+xml"></head><body><div id="app" class="main"><div class="site-header-container"><div class="site-header"><div class="left"> <a href="https://www.codeover.cn"><img class="avatar" src="/images/avatar.png" alt="logo" width="32px" height="32px"></a><a href="https://www.codeover.cn"><h1 class="site-title">codeover</h1></a></div><div class="right"><i class="icon menu-switch icon-menu-outline"></i></div></div></div><div class="menu-container" style="height:0;opacity:0"><nav class="menu-list"> <a href="/" class="menu purple-link">首页</a> <a href="/tags/" class="menu purple-link">标签</a> <a href="/categories/" class="menu purple-link">分类</a> <a href="/archives/" class="menu purple-link">归档</a> <a href="/about/" class="menu purple-link">关于</a></nav></div><div class="content-container"><div class="post-detail"><h2 class="post-title">各常用包管理器配置科学上网代理</h2><div class="post-info post-detail-info"><span><i class="icon icon-calendar-outline"></i> 2022-08-17</span><span><i class="icon icon-pricetags-outline"></i> <a href="/tags/%E4%BB%A3%E7%A0%81%E9%80%9F%E8%AE%B0/">代码速记</a></span></div><div class="post-content-wrapper"><div class="post-content"><p>在日常使用各包管理器时，经常会出现被 GFW 劫持的情况，为此耽误了太多时间，故写此文已记录各常用包管理器科学上网的方法（如有你有更好的方案或有纰漏请留言！）</p><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul><li><a href="#github">github</a></li><li><a href="#curl">curl</a></li><li><a href="go-get">go get</a></li><li><a href="#npm">npm</a></li><li><a href="#yarn">yarn</a></li><li><a href="wget">wget</a></li><li><a href="composer">composer</a></li></ul><h2 id="github"><a href="#github" class="headerlink" title="github"></a>github</h2><h4 id="HTTP-形式"><a href="#HTTP-形式" class="headerlink" title="HTTP 形式"></a>HTTP 形式</h4><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 走 http 代理</span></span><br><span class="line">git config --global http.https://github.com.proxy <span class="string">"http://127.0.0.1:10809"</span></span><br><span class="line"><span class="comment"># 走 socks5 代理</span></span><br><span class="line">git config --global http.https://github.com.proxy <span class="string">"socks5://127.0.0.1:1080"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 取消设置</span></span><br><span class="line">git config --global --<span class="built_in">unset</span> http.https://github.com.proxy</span><br></pre></td></tr></tbody></table></figure><h3 id="ssh-形式"><a href="#ssh-形式" class="headerlink" title="ssh 形式"></a>ssh 形式</h3><h4 id="macOS"><a href="#macOS" class="headerlink" title="macOS"></a>macOS</h4><p>创建或编辑 <code>~/.ssh/config</code> 文件，在末尾添加如下内容</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">   <span class="comment"># 走 HTTP 代理</span></span><br><span class="line">   ProxyCommand socat - PROXY:127.0.0.1:%h:%p,proxyport=10809</span><br><span class="line">   <span class="comment"># 走 socks5 代理</span></span><br><span class="line">   ProxyCommand nc -v -x 127.0.0.1:1080 %h %p</span><br></pre></td></tr></tbody></table></figure><h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><p>创建或编辑 <code>C:\Users\个人用户名\.ssh\config</code> 文件，在末尾添加如下内容</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">    User git</span><br><span class="line">    <span class="comment"># 走 socks5 代理</span></span><br><span class="line">    ProxyCommand connect -S 127.0.0.1:1080 %h %p</span><br><span class="line">    <span class="comment"># 走 http 代理</span></span><br><span class="line">    ProxyCommand connect -H 127.0.0.1:10809 %h %p</span><br></pre></td></tr></tbody></table></figure><h4 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h4><p>创建或编辑 <code>~/.ssh/config</code> 文件，在末尾添加如下内容</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">   <span class="comment"># 走 HTTP 代理</span></span><br><span class="line">   ProxyCommand nc --proxy-type socks5 --proxy 127.0.0.1:1080 %h %p</span><br><span class="line">   <span class="comment"># 走 socks5 代理</span></span><br><span class="line">   ProxyCommand nc --proxy-type http --proxy 127.0.0.1:10809 %h %p</span><br></pre></td></tr></tbody></table></figure><h2 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h2><p>将内容添加至 <code>~/.curlrc</code> 文件『Windows 系统下为 <code>C:\Users\个人用户名\.curlrc</code>』</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 走 HTTP 代理</span></span><br><span class="line">http = <span class="string">"127.0.0.1:10809"</span></span><br><span class="line"><span class="comment"># 走 socks5 代理</span></span><br><span class="line">socks5 = <span class="string">"127.0.0.1:1080"</span></span><br></pre></td></tr></tbody></table></figure><h2 id="go-get"><a href="#go-get" class="headerlink" title="go get"></a>go get</h2><p>试了好多方法都不起作用，还是建议使用替代方案：<a target="_blank" rel="noopener" href="https://goproxy.io/">goproxy.io</a></p><h2 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h2><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> proxy http://127.0.0.1:10809</span><br><span class="line">npm config <span class="built_in">set</span> https-proxy http://127.0.0.1:10809</span><br></pre></td></tr></tbody></table></figure><p>测试使用 <code>socket5</code> 代理报错，似乎使用 <code>http</code> 代理，有些包在 <code>postinstall</code> 阶段下载内容还需要单独配置环境变量，建议一步到位直接使用 <a target="_blank" rel="noopener" href="https://yarn.bootcss.com/docs/install#windows-stable">yarn</a></p><h2 id="yarn"><a href="#yarn" class="headerlink" title="yarn"></a>yarn</h2><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">yarn config <span class="built_in">set</span> proxy http://127.0.0.1:10809</span><br><span class="line">yarn config <span class="built_in">set</span> https-proxy http://127.0.0.1:10809</span><br></pre></td></tr></tbody></table></figure><p>同样不支持 <code>socket5</code> 代理</p><h2 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h2><p>编辑文件 <code>~/.wgetrc</code> ，直接写入如下内容</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">use_proxy=<span class="built_in">yes</span></span><br><span class="line">http_proxy=127.0.0.1:10809</span><br><span class="line">https_proxy=127.0.0.1:10809</span><br></pre></td></tr></tbody></table></figure><h2 id="composer"><a href="#composer" class="headerlink" title="composer"></a>composer</h2><p>目前阿里云出了 composer 全量镜像，速度十分快，故也没有科学上网的必要了。</p><p>阿里云 composer 镜像地址: <a target="_blank" rel="noopener" href="https://developer.aliyun.com/composer">https://developer.aliyun.com/composer</a></p></div><div class="top-div"><ol class="top-box"><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#%E7%9B%AE%E5%BD%95"><span class="top-box-text">目录</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#github"><span class="top-box-text">github</span></a><ol class="top-box-child"><li class="top-box-item top-box-level-3"><a class="top-box-link" href="#ssh-%E5%BD%A2%E5%BC%8F"><span class="top-box-text">ssh 形式</span></a></li></ol></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#curl"><span class="top-box-text">curl</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#go-get"><span class="top-box-text">go get</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#npm"><span class="top-box-text">npm</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#yarn"><span class="top-box-text">yarn</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#wget"><span class="top-box-text">wget</span></a></li><li class="top-box-item top-box-level-2"><a class="top-box-link" href="#composer"><span class="top-box-text">composer</span></a></li></ol></div></div></div><div class="next-post"><a class="purple-link" href="/elasticsearch/"><h3 class="post-title"> 下一篇：Elasticsearch 全文搜索引擎基本使用</h3></a></div></div><div id="gitalk-container"></div><footer><div class="site-footer"><div class="social-container"><a aria-label="跳转至github" href="https://github.com/f-dong" target="_blank"><i class="icon icon-github"></i></a></div> Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> <a href="https://github.com/f-dong/hexo-theme-minimalism" target="_blank">Theme</a> | <a href="https://beian.miit.gov.cn" target="_blank">豫ICP备2022011962号</a> | <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41010402002848" target="_blank">豫公网安备41010402002848号</a></div></footer></div><script id="hexo-configurations">window.theme_config={image:{lazyload_enable:!0,photo_zoom:"simple-lightbox"}},window.is_post=!0</script><script src="/js/main.js"></script><script src="/js/gitalk.min.js"></script><script>var gitalk=new Gitalk({clientID:"eaa8ec37487184406145",clientSecret:"77f9955d0267c1331df7cc706cfa385d2befb9c6",repo:"blog",owner:"f-dong",admin:["f-dong"],id:location.pathname.slice(1,location.pathname.lastIndexOf("/")).substring(0,49),distractionFreeMode:!1,createIssueManually:!0});gitalk.render("gitalk-container")</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-2GM6102E19"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-2GM6102E19")</script></body></html>